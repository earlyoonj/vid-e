{% extends 'base.html' %}

<!-- css -->
{% block css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/archive.css') }}">
{% endblock %} 

{% block content %}
    <!-- archive page title -->
    <div id = "title">
        <h1>Your Archive</h1>
        <p>지금까지 작업 한 영상 목록입니다</p>
    </div>

    <div style="overflow: auto;" class = "content-container">
        <div id = "archive-content-list">
            {% for i in range(video|length): %}
                <div id="{{ video[i]['id'] }}" class = "archive-content">
                    <!-- title, date -->
                    <div class = "archive-page-title">
                        <h5 class = "video-title">
                            {{video[i]['name']}}
                        </h5>
                        <h5 class = "a-video-date">
                            {{video[i]['date']}}
                        </h5>
                        <h5 class = "a-video-time">
                            {{video[i]['time']}}
                        </h5>
                    </div>

                    <div class = "a-vid-button">
                        <!-- {{video[i]['id']}} -->
                        <div class = "rm_archive_vids">
                            <!-- 무음제거 -->
                            
                            <video class="vids" preload="metadata" src = "{{ url_for('static', filename=video[i]['src']) }}" controls>
                            </video>
                            <a class="process rm-silence" href="{{video[i]['id']}}/rm_silence" >
                                <div  class = "loader hide"></div>
                                <div  class = "pre-checkmark">
                                    <div class="pre-checkmark_stem"></div>
                                    <div class="pre-checkmark_kick"></div>
                                </div>
                                <div class = "checkmark hide">
                                    <div class="checkmark_stem"></div>
                                    <div class="checkmark_kick"></div>
                                </div>
                                <span id="category">무음 제거</span>
                            </a>
                        </div>
                        <!-- {{video[0]}} -->
                        <!-- {{video[1]}} -->
                        <!-- 효과음, 무음 메뉴로 이동 + 상태(?) -->
                        <div class = "effect_archive_vids">
                            
                            <!-- 효과음 -->
                            <!-- <video class="vids" preload="metadata" src = "{{ url_for('static', filename=video[i]) }}" controls>
                            </video> -->
                            <video class="vids" preload="metadata" src = "{{ url_for('static', filename=video[i]['src']) }}" controls>
                            </video>
                            <a class="process add-effect" href="{{ video[i]['id'] }}/add_effect">
                                <div class = "loader hide" id="loader"></div>
                                <div class = "pre-checkmark"id="pre-checkmark" >
                                    <div class="pre-checkmark_stem"></div>
                                    <div class="pre-checkmark_kick"></div>
                                </div>
                                <div class = "checkmark hide" id="checkmark" >
                                    <div class="checkmark_stem"></div>
                                    <div class="checkmark_kick"></div>
                                </div>
                                <span id="category">효과음 추가</span>
                            </a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block js %}
    <!-- static js -->
    <script src="{{ url_for('static', filename='js/archive.js') }}" type="text/javascript"></script>
    
    <script type="text/javascript">
        const video = {{ video|tojson }};
        const output = {{ output|tojson }};
        
        for (let i in video) {
            updateStatus(video[i]['id'], '.rm_archive_vids', output[i]['rm_silence']['status'], video[i]['src']);
            updateStatus(video[i]['id'], '.effect_archive_vids', output[i]['add_effect']['status'], video[i]['src']);
        }
        </script>
{% endblock %}
