{% extends 'base.html' %}

{% block css %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
{% endblock %}

{% block content %}
    <!-- 파일 리스트 -->
    <h1 id="page-title">VidE</h1>
    <p id="page-sub">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi 
    </p>

    <div id = "upload">
        <form id="input-form" action="{{ url_for('upload') }}" method="POST" enctype="multipart/form-data">
            <label id="upload-label" for="input-file">
                <input type="file" id="input-file" class="file" name="video" onchange="this.form.submit();" accept="video/mp4"/>
                <span id = "upload-loader">Upload</span>
            </label>    
        </form>
    </div>

    <div id="archive-content-list">
        <h3 id="menu-archive">Archive</h3>
        <ul>
            {% for i in range(video|length):  %}
            {% if 3 > i %}
                {% include 'status/archive_item.html' %}
            {% endif %}
            {% endfor %}
        </ul>
        <a class="archBtn" href="{{ url_for('archive') }}">VIEW MORE →</a>
    </div>
{% endblock %}


{% block js %}
<!-- static js -->
<script src="{{ url_for('static', filename='js/archive.js') }}" type="text/javascript"></script>
<script type="text/javascript">
    var data = {{ video | tojson }};
    var updateVids = {{ output | tojson }};
    
    const uploadBtn = document.getElementById('upload');

    uploadBtn.addEventListener('click', (e) =>{
        const loader = document.getElementById("upload-loader");
        console.log(loader);
        const navLoader = document.getElementById("input-label");

        loader.classList.add("processing");
        navLoader.classList.add("processing");
    })

    update_vid(updateVids);
</script>
{% endblock %}